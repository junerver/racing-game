# 🏎️ Racing Game

一款基于 Next.js 和 TypeScript 开发的 H5 赛车游戏。挑战自己，在避开障碍物的同时尽可能行驶更远的距离！

## 🎮 游戏玩法

- **目标**：在高速行驶中避开障碍车辆，收集道具和金币，尽可能行驶更远的距离
- **操作**：使用 ← → 方向键控制车辆左右移动
- **生命值**：游戏开始时有 3 颗心，每次碰撞失去 1 颗心，失去所有心后游戏结束
- **速度**：车辆速度会随着行驶距离逐渐增加，难度也会相应提升

## 🎯 难度选择

游戏提供三种难度模式，不同难度会影响速度、道具出现几率和金币面额：

- 🟢 **简单模式**：速度降低 30%，道具出现几率提升 20%，金币面额 100/200/500
- 🟡 **中等模式**：标准速度，标准道具出现几率，金币面额 100/200
- 🔴 **困难模式**：速度提升 20%，道具出现几率降低 20%，金币面额仅 100

### 动态平衡机制

所有道具都采用动态难度调整：

- **简单模式**：基础道具和商店道具出现几率提升至 120%
- **中等模式**：维持标准出现几率（100%）
- **困难模式**：道具出现几率降低至 80%

## 💎 道具系统

### 基础道具（每 2 秒出现）

- ⚡ **速度提升**：速度提升至 1.5 倍（持续 8 秒）
- 🛡️ **无敌**：无视碰撞，不会受到伤害（持续 8 秒）
- 🧲 **磁铁**：自动吸引屏幕上所有道具（持续 8 秒）
- 2× **分数倍增器**：分数获取速度翻倍（持续 8 秒）
- $ **金币**：立即获得金币，面额有 100/200/500 三种

### 商店道具（每 30 秒出现）

- 🛡️ **商店无敌**：无视碰撞（持续 8 秒）
- 🔫 **机枪**：发射双弹幕摧毁前方车辆（持续 10 秒）
- 🚀 **火箭燃料**：速度提高两倍突破极速（持续 6 秒）
- ⚡ **氮气加速**：快速加速到极速（持续 3 秒）

### 爱心道具（生命恢复）

- ❤ **爱心**：恢复 1 点生命值（最多 3 点）
  - 仅在生命值 ≤ 1 时出现
  - 生命值恢复到 3 后停止生成
  - 出现几率根据难度调整（简单 80%，中等 65%，困难 50%）

## 🎰 金币老虎机

收集金币时会自动填充老虎机卡片，集满 3 张后可启动老虎机进行抽奖：

- **启动方式**：按 **S** 键或点击老虎机按钮
- **奖池金额**：3 张卡片的金币总和的 **1/2**（避免金币快速膨胀）
- **滚轮结果**：❌、谢谢、100、200、500

### 奖励规则

- **三个相同数字**（基于半池计算）：
  - 全 100：1.5 倍半池（例如投入 500，半池 250，奖励 125）
  - 全 200：2 倍半池（例如投入 500，半池 250，奖励 250）
  - 全 500：3 倍半池（例如投入 500，半池 250，奖励 500）
- **三个谢谢**：奖励 10 金币
- **三个 ❌**：惩罚，从总金币中扣除半池金额
- **其他组合**：无效果，不获得奖励

**平衡机制**：老虎机奖池采用半池机制，即实际奖池为投入金币总和的 50%，有效控制金币膨胀速度。

## 🔮 道具合成系统

当按顺序获得特定道具组合时，会触发道具合成，产生更强大的效果：

### 合成配方（必须按顺序获得）

1. **🌀🔫 旋转弹幕射击**

   - 配方：无敌护盾 → 机枪
   - 效果：旋转的无敌护盾发射机枪子弹，形成圆弧形弹幕
   - 持续时间：10 秒

2. **🔫🔫 四弹道机枪**

   - 配方：2x 分数 → 机枪
   - 效果：射击弹幕从 2 弹道扩展为 4 弹道
   - 持续时间：10 秒

3. **⚡🌩️ 风暴闪电**

   - 配方：机枪 → 氮气加速
   - 效果：每 2 秒实现一次全屏攻击，清除所有道路上的障碍车辆
   - 持续时间：10 秒

4. **❤❤ 双倍爱心**

   - 配方：2x 分数 → 爱心
   - 效果：获得两个爱心，补充两点耐久
   - 即时效果

5. **💰💰 双倍金币**

   - 配方：2x 分数 → 金币
   - 效果：金币面额两倍
   - 即时效果

6. **🚀⚡ 涡轮过载**

   - 配方：火箭燃料 → 氮气加速
   - 效果：车辆 3 倍速度，半透明车身，围绕车辆闪烁光晕，无视碰撞
   - 持续时间：10 秒

7. **🛡️🔺 钢铁之躯**

   - 配方：无敌护盾 → 无敌护盾
   - 效果：三角形光环包围车辆，碰撞时摧毁障碍车辆，每次摧毁奖励 10 金币
   - 持续时间：10 秒

8. **🛡️💰 金钟罩**

   - 配方：无敌护盾 → 金币
   - 效果：无敌护盾效果，如果持续时间内没有碰撞，则双倍返还金币面额
   - 持续时间：12 秒
   - 注意：合成时金币不计入余额和老虎机，作为合成素材消耗

9. **🔫⚡ 死星射击**

   - 配方：机枪 → 机枪
   - 效果：车辆向前方发出白色射线柱（带紫色闪电条纹和光晕），摧毁触碰的障碍车辆，每次摧毁奖励 10 金币
   - 持续时间：10 秒

10. **🔥🛡️ 无敌风火轮**
    - 配方：钢铁之躯 → 无敌护盾
    - 效果：与钢铁之躯相同，额外追加碰撞延时效果，每次碰撞摧毁增加持续时间 0.25 秒
    - 持续时间：10 秒（可通过碰撞延长）

### 合成机制

- 必须按照配方顺序获得道具（先 A 后 B）
- 合成触发后，原始道具效果立即结束
- 显示新的合成道具图标和倒计时
- 合成道具以紫色渐变边框显示

## 💰 机枪金币奖励

使用机枪或合成机枪道具摧毁障碍车辆时，每摧毁一辆奖励 **10 金币**：

- 普通机枪摧毁：+10 金币/辆
- 四弹道机枪摧毁：+10 金币/辆
- 旋转弹幕射击摧毁：+10 金币/辆
- 风暴闪电清除：+10 金币/辆

## 👹 Boss 战模式

每行驶 **100 公里**会触发一次 Boss 战，挑战强大的 Boss 获得丰厚奖励：

### Boss 特性

- **多种攻击模式**：
  - 🔫 **机枪扫射**：发射三发子弹进行扫射攻击
  - 🔴 **激光炮**：发射宽激光束全屏攻击
  - 🚗 **投掷障碍车**：向道路投掷障碍车辆
- **血量系统**：Boss 拥有独立血条，需要持续攻击才能击败
- **战斗机制**：Boss 战期间暂停普通障碍物生成，专注于 Boss 战斗
- **阶段系统**：Boss 血量降低会进入不同阶段，攻击频率和强度提升

### Boss 战奖励

- 击败 Boss 获得大量金币奖励
- 获得额外分数加成
- Boss 战统计数据记录（击败次数、连胜记录等）

### Boss 战策略

- 使用机枪类道具可以有效对 Boss 造成伤害
- 无敌护盾可以抵挡 Boss 的攻击
- 注意躲避 Boss 的各种攻击模式
- 合理使用道具组合提升战斗效率

## 📊 游戏统计

游戏提供详细的统计数据追踪系统：

### 基础统计

- 总游戏次数
- 总行驶距离
- 总游戏时长
- 最高分数记录

### 道具统计

- 各类道具使用次数统计
- 道具使用频率分析

### Boss 战统计

- Boss 击败次数
- 最高连胜记录
- 对 Boss 造成的总伤害
- Boss 战胜率

可在游戏结束后查看详细统计数据，或访问排行榜页面查看历史记录。

## 🎮 控制方式

### 键盘控制

- **← →** - 左右移动车辆
- **ESC** - 暂停/继续游戏
- **SPACE / ENTER** - 开始/重新开始游戏
- **S** - 启动金币老虎机（集满 3 张卡片后）
- **1/2/3/4** - 购买商店道具（需要金币）

### 触摸控制

- **拖动屏幕** - 左右移动车辆（支持移动端）
- **点击按钮** - 使用屏幕上的 UI 按钮进行操作

## 🚀 开发和运行

### 技术栈

- **框架**：Next.js 16.0.7 (App Router)
- **React**：19.2.0
- **TypeScript**：5.x
- **样式**：Tailwind CSS 4
- **包管理器**：npm

### 开发命令

```bash
# 启动开发服务器 (http://localhost:3389)
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm start

# 启动生产服务器（指定端口）
npx next start -p 9000

# 运行代码检查
npm run lint
```

### 快速启动（推荐）

如果不想每次都等待开发模式的编译时间，可以使用生产模式：

```bash
# 1. 首次或代码修改后构建（只需执行一次）
npm run build

# 2. 启动生产服务器（启动速度快，无需编译）
npx next start -p 9000
```

**优势**：

- ⚡ 启动速度快（约 1 秒内启动）
- 🚀 无需等待编译
- 💪 性能更优

**注意**：如果端口被占用，可以更换其他端口号（如 8080、9000 等）

## 📝 游戏特性

- ✅ 渐进式难度系统
- ✅ 多种道具和特殊效果
- ✅ 金币系统和商店
- ✅ 金币老虎机抽奖系统（半池机制）
- ✅ 道具合成系统（10 种合成配方）
- ✅ 机枪金币奖励机制
- ✅ Boss 战模式（每 100 公里触发）
- ✅ 完全恢复道具（大还丹）
- ✅ 详细的游戏统计系统
- ✅ 排行榜记录
- ✅ 车辆自定义系统
- ✅ 键盘+触摸双控制方式
- ✅ 流畅的 60fps 游戏体验
- ✅ 响应式设计

## 🎨 游戏画面

游戏采用 Canvas 渲染，提供流畅的动画效果和视觉反馈：

- 动态道路线条
- 道具光晕效果
- 碰撞恢复闪烁
- 无敌护盾特效
- 子弹光晕效果

## 📄 许可证

本项目仅供学习和娱乐使用。
